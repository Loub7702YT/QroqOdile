<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>QroqOdile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='85'>üêä</text></svg>">
  <style>
    body { margin:0; font-family:sans-serif; background:#0d1117; color:#c9d1d9; display:flex; flex-direction:column; height:100vh }
    header { padding:1rem; background:#161b22; font-size:1.4rem; font-weight:600; border-bottom:1px solid #21262d }
    #chat { flex:1; overflow-y:auto; padding:1rem; display:flex; flex-direction:column; gap:.75rem }
    .msg { padding:.75rem 1rem; border-radius:10px; max-width:80%; word-wrap:break-word; line-height:1.4 }
    .user { background:#238636; align-self:flex-end }
    .bot  { background:#161b22; align-self:flex-start }
    #inputWrap { display:flex; padding:1rem; background:#161b22 }
    #textInput { flex:1; padding:.75rem; border:none; border-radius:8px; margin-right:.5rem; background:#0d1117; color:#fff }
    #sendBtn { padding:.75rem 1.25rem; border:none; border-radius:8px; background:#238636; color:#fff; cursor:pointer }
    .warning { color:#f85149; font-weight:500; padding:.75rem 1rem; background:#161b22; border:1px solid #f85149; border-radius:8px }
  </style>
</head>
<body>

<header>üêä QroqOdile</header>

<div id="chat"></div>

<div id="inputWrap">
  <input id="textInput" type="text" placeholder="Type your message...">
  <button id="sendBtn">Send</button>
</div>

<script>
// Your API Key
const apiKey = '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'

// Get DOM elements
const chat = document.getElementById("chat")
const input = document.getElementById("textInput")
const sendBtn = document.getElementById("sendBtn")

// Send message button click event
sendBtn.onclick = () => {
  const userText = input.value.trim()
  if (userText !== "") {
    appendMsg(userText, "user")
    input.value = ""
    getGroqReply(userText)
  }
}

// Handle Enter key
input.addEventListener("keypress", e => {
  if (e.key === "Enter") sendBtn.click()
})

// Append user or bot message to chat
function appendMsg(text, type) {
  const msg = document.createElement("div")
  msg.className = "msg " + type
  msg.textContent = text
  chat.appendChild(msg)
  chat.scrollTop = chat.scrollHeight
}

// Function to get the AI's reply from Groq API
async function getGroqReply(userText) {
  try {
    const response = await fetch('https://api.groq.ai/v1/complete', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${apiKey}`
      },
      body: JSON.stringify({
        prompt: userText,
        max_tokens: 150,
        temperature: 0.7,
        top_p: 1,
        frequency_penalty: 0,
        presence_penalty: 0
      })
    })
    
    const data = await response.json()
    console.log("API Response:", data) // Log API response for debugging

    if (data && data.choices && data.choices[0].text) {
      appendMsg(data.choices[0].text.trim(), "bot")
    } else {
      appendMsg("Sorry, I couldn't understand that.", "bot")
    }
  } catch (error) {
    console.error("Error fetching AI response:", error)
    appendMsg("There was an error with the AI response. Please try again.", "bot")
  }
}
</script>

</body>
</html>
